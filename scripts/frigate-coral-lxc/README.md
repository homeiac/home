# frigate-coral-lxc Scripts

> Auto-generated by `scripts/generate-readme.sh` - do not edit manually

## Scripts

| Script | Description |
|--------|-------------|
| `01-check-prerequisites.sh` | Frigate Coral LXC - Check Prerequisites<br>GitHub Issue: #168<br>Verifies required packages on Proxmox host |
| `02-verify-coral-usb.sh` | Frigate Coral LXC - Verify Coral USB Detection<br>GitHub Issue: #168<br>Confirms Coral USB device is visible via lsusb |
| `03-find-sysfs-path.sh` | Frigate Coral LXC - Find USB Sysfs Path<br>GitHub Issue: #168<br>Finds the sysfs path for hookscript USB reset |
| `03a-create-container-automated.sh` | Automated Frigate LXC creation using PVE Helper Script<br>Requires: frigate.vars in same directory OR /usr/local/community-scripts/defaults/<br>GitHub Issue: #168<br>Documentation: docs/source/md/proxmox-pve-helper-scripts-automation.md |
| `04-check-udev-rules.sh` | Frigate Coral LXC - Check Udev Rules<br>GitHub Issue: #168<br>Verifies if Coral udev rules exist |
| `04a-check-dev-dri.sh` | 04a-check-dev-dri.sh - CRITICAL check for /dev/dri on host<br>The PVE Helper Script frigate-install.sh ALWAYS runs:<br>chgrp video /dev/dri<br>for privileged containers (CTTYPE=0).<br>This is NOT controlled by var_gpu option - it's unconditional.<br>If /dev/dri doesn't exist, the install fails with exit code 39. |
| `05-create-udev-rules.sh` | Frigate Coral LXC - Create Udev Rules<br>GitHub Issue: #168<br>Creates /etc/udev/rules.d/98-coral.rules |
| `05a-install-dfu-util.sh` | Frigate Coral LXC - Install dfu-util<br>GitHub Issue: #168<br>Reference: docs/source/md/coral-tpu-automation-runbook.md |
| `05b-download-firmware.sh` | Frigate Coral LXC - Download Coral Firmware<br>GitHub Issue: #168<br>Reference: docs/source/md/coral-tpu-automation-runbook.md |
| `05c-create-udev-rules.sh` | Frigate Coral LXC - Create Udev Rules with Firmware Loading<br>GitHub Issue: #168<br>Reference: docs/source/md/coral-tpu-automation-runbook.md<br>This creates udev rules that:<br>1. Set correct permissions for Coral USB (0666)<br>2. Auto-load firmware via dfu-util when Coral detected in bootloader mode (1a6e:089a)<br>3. Coral then re-enumerates as 18d1:9302 (Google Inc - ready to use) |
| `06-reload-udev.sh` | Frigate Coral LXC - Reload Udev Rules and Initialize Coral<br>GitHub Issue: #168<br>Reference: docs/source/md/coral-tpu-automation-runbook.md<br>Reloads udev rules and triggers Coral firmware loading<br>After this, Coral should switch from 1a6e:089a to 18d1:9302 |
| `10-stop-container.sh` | Frigate Coral LXC - Stop Container<br>GitHub Issue: #168<br>Stops the container for configuration changes |
| `11-add-usb-passthrough.sh` | Frigate Coral LXC - Add USB Passthrough<br>GitHub Issue: #168<br>Adds dev0 line for Coral USB to LXC config |
| `12-add-cgroup-permissions.sh` | Frigate Coral LXC - Add Cgroup Permissions<br>GitHub Issue: #168<br>Adds USB cgroup permissions to LXC config |
| `13-add-vaapi-passthrough.sh` | Frigate Coral LXC - Add VAAPI Passthrough (Optional)<br>GitHub Issue: #168<br>Adds GPU/VAAPI passthrough for hardware video decoding |
| `20-create-hookscript.sh` | Frigate Coral LXC - Create Hookscript<br>GitHub Issue: #168<br>Deploys the Coral USB reset hookscript to the Proxmox host |
| `21-attach-hookscript.sh` | Frigate Coral LXC - Attach Hookscript<br>GitHub Issue: #168<br>Attaches the hookscript to the LXC container config |
| `30-start-container.sh` | Frigate Coral LXC - Start Container<br>GitHub Issue: #168<br>Starts the container (hookscript runs pre-start) |
| `31-verify-hookscript.sh` | Frigate Coral LXC - Verify Hookscript<br>GitHub Issue: #168<br>Checks that the hookscript executed successfully |
| `32-verify-frigate-api.sh` | Frigate Coral LXC - Verify Frigate API<br>GitHub Issue: #168<br>Checks that Frigate is responding |
| `33-verify-coral-detection.sh` | Frigate Coral LXC - Verify Coral Detection<br>GitHub Issue: #168<br>Checks Coral TPU inference speed |
| `34-verify-usb-in-container.sh` | Frigate Coral LXC - Verify USB in Container<br>GitHub Issue: #168<br>Confirms USB device is visible inside the container |
| `40-update-frigate-config.sh` | Frigate Coral LXC - Update Frigate Config for Coral TPU<br>GitHub Issue: #168<br>Reference: docs/source/md/coral-tpu-automation-runbook.md<br>This script updates Frigate's config.yml to use Coral TPU instead of OpenVINO/CPU<br>It backs up the current config before making changes |
| `41-restart-frigate.sh` | Frigate Coral LXC - Restart Frigate Service<br>GitHub Issue: #168<br>Restarts Frigate to apply config changes |
| `42-configure-cameras.sh` | Frigate Coral LXC - Configure Cameras<br>GitHub Issue: #168<br>Applies camera configuration to Frigate from backup or template.<br>This is the CRITICAL step - Frigate is useless without cameras. |
| `43-verify-cameras.sh` | Frigate Coral LXC - Verify Cameras<br>GitHub Issue: #168<br>Verifies cameras are streaming and object detection is working. |
| `44-add-storage-mount.sh` | Frigate Coral LXC - Add Storage Mount for Recordings<br>GitHub Issue: #168<br>Adds external storage passthrough to Frigate container for recordings.<br>User must physically connect and mount the drive on host first.<br>Usage: ./44-add-storage-mount.sh [HOST_MOUNT_PATH]<br>If HOST_MOUNT_PATH not provided, script will show available mounts and prompt. |
| `45-verify-storage.sh` | Frigate Coral LXC - Verify Storage Mount<br>GitHub Issue: #168<br>Verifies storage is properly mounted and writable for Frigate recordings. |
| `90-rollback-full.sh` | Frigate Coral LXC - Full Rollback<br>GitHub Issue: #168<br>Destroys container and cleans up all created resources |
| `hookscript-template.sh` | Coral LXC Hookscript Template<br>GitHub Issue: #168<br>This is deployed to /var/lib/vz/snippets/coral-lxc-hook-<VMID>.sh on the host<br>Features:<br>- Detects Coral by vendor ID (1a6e uninitialized, 18d1 initialized)<br>- Performs USB unbind/bind reset before container start<br>- Updates dev0 path in LXC config after reset (device number may change)<br>- Logs all actions to syslog |

*Generated: 2026-01-18*
