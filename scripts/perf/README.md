# perf Scripts

> Auto-generated by `scripts/generate-readme.sh` - do not edit manually

## Scripts

| Script | Description |
|--------|-------------|
| `app-logs.sh` | app-logs.sh - Application layer log analysis<br>Used in Step 2b of the diagnosis flowchart when USE Method shows<br>all resources OK. Looks for timing info, errors, and external<br>service latency in application logs.<br>Usage:<br>./app-logs.sh --target proxmox-vm:116 --service homeassistant<br>./app-logs.sh --target k8s-pod:frigate/frigate-xyz<br>./app-logs.sh --target ssh:root@host.maas --service nginx |
| `diagnose.sh` | diagnose.sh - Orchestrated Performance Diagnosis<br>Follows the USE Method flowchart automatically:<br>1. USE Method (check all resources)<br>2a. Resource Deep Dive (if issues found)<br>2b. Application Logs (if USE clean)<br>3. Standard Tracing (if app logs point to external)<br>Usage:<br>./diagnose.sh --target proxmox-vm:116        # HAOS on chief-horse<br>./diagnose.sh --target ssh:root@host.maas    # Direct SSH<br>./diagnose.sh --target k8s-pod:ns/pod        # K8s pod |
| `install-crisis-tools.sh` | Install Linux Crisis Tools<br>Based on Brendan Gregg's recommendations:<br>https://www.brendangregg.com/blog/2024-03-24/linux-crisis-tools.html<br>Pre-install these tools BEFORE you need them!<br>During a crisis, network may be down, repos unreachable. |
| `memory-deep-dive.sh` | memory-deep-dive.sh - Deep memory analysis when USE Method finds memory issues<br>Triggered by diagnose.sh when memory utilization/saturation/errors detected.<br>Shows:<br>- Memory breakdown (used, buffers, cache, available)<br>- Top memory consumers<br>- Swap activity<br>- OOM history<br>- Page scanning (memory pressure indicators)<br>Usage:<br>./memory-deep-dive.sh --target proxmox-vm:116<br>./memory-deep-dive.sh --target ssh:root@host.maas |
| `network-timing.sh` | network-timing.sh - Network timing breakdown using curl<br>Shows where time is spent in network requests:<br>- DNS lookup<br>- TCP connect<br>- TLS handshake<br>- Time to first byte (TTFB)<br>- Total time<br>Usage:<br>./network-timing.sh http://service.homelab:8123/api/<br>./network-timing.sh --repeat 5 http://service.homelab:8123/api/ |
| `network-topology.sh` | network-topology.sh - Analyze network path between two endpoints<br>Used when services are on different subnets and latency could be<br>caused by routing, NAT, or firewall traversal.<br>Usage:<br>./network-topology.sh --from <source> --to <target><br>./network-topology.sh --from 192.168.86.245 --to 192.168.4.240 |
| `quick-triage.sh` | Quick Triage - 60-Second Linux Performance Analysis<br>Based on Brendan Gregg's methodology<br>https://netflixtechblog.com/linux-performance-analysis-in-60-000-milliseconds-accc10403c55<br>Run these 10 commands first to get a high-level view before diving deeper.<br>Order follows USE method: look for Errors first, then Utilization/Saturation. |
| `run-on-proxmox-vm.sh` | Run USE Method checklist on a Proxmox VM<br>Copies the script to the host, then executes inside the VM via qm guest exec<br>Usage:<br>./run-on-proxmox-vm.sh 116              # HAOS on chief-horse<br>./run-on-proxmox-vm.sh 108              # K3s VM on still-fawn<br>./run-on-proxmox-vm.sh 116 --quick      # Quick triage only |
| `use-checklist.sh` | USE Method Performance Checklist<br>Based on Brendan Gregg's methodology: https://www.brendangregg.com/usemethod.html<br>For every resource, check:<br>U - Utilization (% time busy)<br>S - Saturation (queue length / work waiting)<br>E - Errors (error counts)<br>Usage:<br>use-checklist.sh                           # Local system<br>use-checklist.sh --context k8s-pod:ns/pod  # K8s pod + node<br>use-checklist.sh --context proxmox-vm:108  # Proxmox VM + host<br>use-checklist.sh --context lxc:113         # LXC container + host<br>use-checklist.sh --save                    # Save JSON report<br>use-checklist.sh --compare <file.json>     # Compare to baseline |
| `voice-pe-timing.sh` | voice-pe-timing.sh - Diagnose Voice PE TTS latency<br>Checks the full Voice PE → HAOS → Voice PE flow:<br>1. TCP connectivity to Wyoming services<br>2. Wyoming protocol response time<br>3. Actual TTS synthesis timing (if possible)<br>Usage:<br>./voice-pe-timing.sh                    # Uses default homeassistant.maas<br>./voice-pe-timing.sh --host <haos-ip>   # Custom HAOS host |

*Generated: 2026-01-18*
