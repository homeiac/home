apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  # keep Flux itself
  - flux-system
  - infrastructure/metallb               #(chart + CRDs)
  - infrastructure/monitoring            #(kube-prometheus-stack)
  - infrastructure/traefik               #(static IP config)
  - infrastructure/tailscale             #(subnet router + exit node)
  - infrastructure/crossplane            #(Proxmox VM/LXC provisioning)
  - infrastructure-config/metallb-config        #(address-pool)
  # Crossplane-managed Proxmox instances (VMs/LXCs)
  # NOTE: Requires crossplane-system secret first - see scripts/crossplane/create-proxmox-secret.sh
  # - instances                          # Uncomment after Crossplane is healthy
  - apps/ollama
  - apps/stable-diffusion
  - apps/samba
  - apps/frigate                        # Coral TPU + NVIDIA GPU (secret: frigate-credentials)
  - apps/claudecodeui                    # Claude Code web UI (ghcr.io/homeiac/claudecodeui)
  - apps/postgres                        # PostgreSQL 16 with pgvector, TimescaleDB, PostGIS

