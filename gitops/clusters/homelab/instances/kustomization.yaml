apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# VM and LXC instances managed by Crossplane
# These are Proxmox VMs/containers declared in Git, reconciled by Crossplane

resources:
  # Cloud Images - must be downloaded before VMs can use them
  - ubuntu-noble-cloud-image.yaml  # Ubuntu 24.04 cloud image for import

  # Cloud-Init Snippets - SOPS encrypted (contain K3s tokens)
  # These create snippets on Proxmox via Crossplane EnvironmentFile
  - k3s-cloud-init-fun-bedbug.yaml  # K3s join snippet for fun-bedbug

  # K3s Control Plane Nodes
  - k3s-vm-fun-bedbug.yaml    # VMID 114 - K3s control-plane on fun-bedbug

  # TEST VMs - non-essential, safe to experiment with
  # - rancher-server.yaml          # VMID 200 - RKE2 eval (removed - orphaned ZFS datasets)

  # PRODUCTION - adopted existing infrastructure (deletionPolicy: Orphan)
  # Uncomment after validating Crossplane adoption works
  # - frigate-nvr.yaml           # LXC 113 - Frigate NVR (removed from fun-bedbug)
